<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8">
  <title>–í—Ö–æ–¥ - –¢–µ—Å—Ç–æ–≤–∞ –°–∏—Å—Ç–µ–º–∞</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="auth-page">
  <div class="container auth-container">
    <div style="text-align:center;">
        <h1>üîê –í—Ö–æ–¥</h1>
        <p>–ú–æ–ª—è, –≤–ª–µ–∑—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª–∞ —Å–∏</p>
    </div>

    <form id="loginForm" class="auth-form">
        <label>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ</label>
        <input type="text" id="username" required>
        
        <label>–ü–∞—Ä–æ–ª–∞</label>
        <input type="password" id="password" required>
        
        <button type="submit" class="btn btn-primary" style="width:100%; margin-top:20px;">–í–õ–ï–ó</button>
    </form>

    <div style="text-align:center; margin-top:20px;">
        <p>–ù—è–º–∞—Ç–µ –∞–∫–∞—É–Ω—Ç? <a href="register.html" style="color:var(--primary); font-weight:bold;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></p>
    </div>
  </div>

  <script>
    document.getElementById('loginForm').onsubmit = async (e) => {
        e.preventDefault();
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        const res = await fetch('/api/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({username, password})
        });

        const data = await res.json();
        if (data.success) {
            localStorage.setItem('user', JSON.stringify(data.user));
            window.location.href = 'index.html';
        } else {
            alert(data.error);
        }
    };
  </script>
</body>
</html>